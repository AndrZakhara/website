/*!
 * website
 * Fiercely quick and opinionated front-ends
 * 
 * @author Andr Zakhar
 * @version 1.0.0
 * Copyright 2018. MIT licensed.
 */
/*!
 * website
 * Fiercely quick and opinionated front-ends
 * 
 * @author Andr Zakhar
 * @version 1.0.0
 * Copyright 2018. MIT licensed.
 */
let inputValue = '',
    selectedElement = '',
    previous = false,
    next = false,
    parent = false,
    parentNode = '',
    children = false;

function createAppStructure() {
  const inputSearch = createElement('input', { className: 'search-input', type: 'text', placeholder: 'Selector' });
  const btnSearch = createElement('input', { className: 'search-btn', type: 'button', value: 'search' });
   
  const btnPrev = createElement('input', { className: 'prev-btn', type: 'button', value: 'Prev' });
  const btnNext = createElement('input', { className: 'next-btn', type: 'button', value: 'Next' });
  const btnParent = createElement('input', { className: 'parent-btn', type: 'button', value: 'Parent' });
  const btnChildren = createElement('input', { className: 'children-btn', type: 'button', value: 'Children' });
  
  const textFieldWrapper = createElement('div', { className: 'text-field-wrapper' }, inputSearch, btnSearch);
  const btnWrapper = createElement('div', { className: 'btn-wrapper' }, btnPrev, btnNext, btnParent, btnChildren);
  
  const mainAppWrapper = createElement('div', { className: 'selector-search-app' }, textFieldWrapper, btnWrapper);
  
  btnSearch.disabled = true;
  btnPrev.disabled = true;
  btnNext.disabled = true;
  btnParent.disabled = true;
  btnChildren.disabled = true;

  btnSearch.addEventListener('click', handleSearch);
  inputSearch.addEventListener('input', handleInput);
  btnParent.addEventListener('click', handleParent);

  document.body.insertAdjacentElement('afterBegin', mainAppWrapper);
}

const handleSearch = (e) => {
  inputValue = document.querySelector('.search-input').value;
  
  document.querySelector('.search-input').value = '';
  console.log(inputValue);
  addClass();
}
const handleInput = (e) => {  
  if(e.target.value === '') {
    document.querySelector('.search-btn').disabled = true;
  } 
  else {
    document.querySelector('.search-btn').disabled = false;
  };
}
const handleParent = () => {
  // console.log(`handleParent: ${selectedElement}`);

  selectedElement.classList.remove('selected-element-search');
  selectedElement = parentNode;
  selectedElement.classList.add('selected-element-search');
  findRelative(selectedElement);
}

const addClass = () => {
  console.log('add class');
  console.log(selectedElement);
  
  if(selectedElement === '') {
    const selected = document.querySelector(inputValue);
    
    if (selected !== undefined && selected !== null) {
      selectedElement = selected;
      selectedElement.classList.add('selected-element-search');
      findRelative(selectedElement);
    }
    console.log(selectedElement); 
    
  } 
  else if(selectedElement !== null || selectedElement !== undefined) {
    selectedElement.classList.remove('selected-element-search');
    const selected = document.querySelector(inputValue);
    
    if (selected !== undefined && selected !== null) {
      selectedElement = selected;
      selectedElement.classList.add('selected-element-search');
      findRelative(selectedElement);
    }
  }

  document.querySelector('.search-btn').disabled = true;
  scrollToElement('.selected-element-search'); 
}
const removeClass = () => {
  if(selectedElement !== null || selectedElement !== undefined) {
    selectedElement.classList.remove('selected-element-search');
  }
}

function scrollToElement(theElement) {
    if (typeof theElement === "string") theElement = document.querySelector(theElement);
    var selectedPosX = 0;
    var selectedPosY = 0;
    while (theElement != null) {
        selectedPosX += theElement.offsetLeft;
        selectedPosY += theElement.offsetTop;
        theElement = theElement.offsetParent;
    }
    selectedPosY = selectedPosY-20;
    window.scrollTo(selectedPosX, selectedPosY);
}

function appInit() {
  createAppStructure();
}

function findRelative(element) {
  const tagNameParent = element.parentNode.tagName;
  console.log(`tag: ${tagNameParent}`);

  if(element.parentNode !== undefined 
    && tagNameParent !== 'BODY'
    && tagNameParent !== 'HTML'
    && tagNameParent !== 'document'
    && tagNameParent !== undefined
    ) {
    console.log(element.parentNode);
    document.querySelector('.parent-btn').disabled = false;
    parentNode = element.parentNode;
  } else {
    document.querySelector('.parent-btn').disabled = true;
    parentNode = '';
  }
}

function createElement(tag, props, ...children) {
  const element = document.createElement(tag);

  Object.keys(props).forEach(key => (element[key] = props[key]));

  children.forEach(child => {

    if (typeof child === "string") {
      child = document.createTextNode(child);
    }

    element.appendChild(child);
  });

  return element;
}

document.addEventListener("DOMContentLoaded", appInit);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgaW5wdXRWYWx1ZSA9ICcnLFxyXG4gICAgc2VsZWN0ZWRFbGVtZW50ID0gJycsXHJcbiAgICBwcmV2aW91cyA9IGZhbHNlLFxyXG4gICAgbmV4dCA9IGZhbHNlLFxyXG4gICAgcGFyZW50ID0gZmFsc2UsXHJcbiAgICBwYXJlbnROb2RlID0gJycsXHJcbiAgICBjaGlsZHJlbiA9IGZhbHNlO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQXBwU3RydWN0dXJlKCkge1xyXG4gIGNvbnN0IGlucHV0U2VhcmNoID0gY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGNsYXNzTmFtZTogJ3NlYXJjaC1pbnB1dCcsIHR5cGU6ICd0ZXh0JywgcGxhY2Vob2xkZXI6ICdTZWxlY3RvcicgfSk7XHJcbiAgY29uc3QgYnRuU2VhcmNoID0gY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGNsYXNzTmFtZTogJ3NlYXJjaC1idG4nLCB0eXBlOiAnYnV0dG9uJywgdmFsdWU6ICdzZWFyY2gnIH0pO1xyXG4gICBcclxuICBjb25zdCBidG5QcmV2ID0gY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGNsYXNzTmFtZTogJ3ByZXYtYnRuJywgdHlwZTogJ2J1dHRvbicsIHZhbHVlOiAnUHJldicgfSk7XHJcbiAgY29uc3QgYnRuTmV4dCA9IGNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBjbGFzc05hbWU6ICduZXh0LWJ0bicsIHR5cGU6ICdidXR0b24nLCB2YWx1ZTogJ05leHQnIH0pO1xyXG4gIGNvbnN0IGJ0blBhcmVudCA9IGNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBjbGFzc05hbWU6ICdwYXJlbnQtYnRuJywgdHlwZTogJ2J1dHRvbicsIHZhbHVlOiAnUGFyZW50JyB9KTtcclxuICBjb25zdCBidG5DaGlsZHJlbiA9IGNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBjbGFzc05hbWU6ICdjaGlsZHJlbi1idG4nLCB0eXBlOiAnYnV0dG9uJywgdmFsdWU6ICdDaGlsZHJlbicgfSk7XHJcbiAgXHJcbiAgY29uc3QgdGV4dEZpZWxkV3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAndGV4dC1maWVsZC13cmFwcGVyJyB9LCBpbnB1dFNlYXJjaCwgYnRuU2VhcmNoKTtcclxuICBjb25zdCBidG5XcmFwcGVyID0gY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdidG4td3JhcHBlcicgfSwgYnRuUHJldiwgYnRuTmV4dCwgYnRuUGFyZW50LCBidG5DaGlsZHJlbik7XHJcbiAgXHJcbiAgY29uc3QgbWFpbkFwcFdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ3NlbGVjdG9yLXNlYXJjaC1hcHAnIH0sIHRleHRGaWVsZFdyYXBwZXIsIGJ0bldyYXBwZXIpO1xyXG4gIFxyXG4gIGJ0blNlYXJjaC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgYnRuUHJldi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgYnRuTmV4dC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgYnRuUGFyZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICBidG5DaGlsZHJlbi5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gIGJ0blNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVNlYXJjaCk7XHJcbiAgaW5wdXRTZWFyY2guYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBoYW5kbGVJbnB1dCk7XHJcbiAgYnRuUGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlUGFyZW50KTtcclxuXHJcbiAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyQmVnaW4nLCBtYWluQXBwV3JhcHBlcik7XHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZVNlYXJjaCA9IChlKSA9PiB7XHJcbiAgaW5wdXRWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtaW5wdXQnKS52YWx1ZTtcclxuICBcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWlucHV0JykudmFsdWUgPSAnJztcclxuICBjb25zb2xlLmxvZyhpbnB1dFZhbHVlKTtcclxuICBhZGRDbGFzcygpO1xyXG59XHJcbmNvbnN0IGhhbmRsZUlucHV0ID0gKGUpID0+IHsgIFxyXG4gIGlmKGUudGFyZ2V0LnZhbHVlID09PSAnJykge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1idG4nKS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfSBcclxuICBlbHNlIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtYnRuJykuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9O1xyXG59XHJcbmNvbnN0IGhhbmRsZVBhcmVudCA9ICgpID0+IHtcclxuICAvLyBjb25zb2xlLmxvZyhgaGFuZGxlUGFyZW50OiAke3NlbGVjdGVkRWxlbWVudH1gKTtcclxuXHJcbiAgc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkLWVsZW1lbnQtc2VhcmNoJyk7XHJcbiAgc2VsZWN0ZWRFbGVtZW50ID0gcGFyZW50Tm9kZTtcclxuICBzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQtZWxlbWVudC1zZWFyY2gnKTtcclxuICBmaW5kUmVsYXRpdmUoc2VsZWN0ZWRFbGVtZW50KTtcclxufVxyXG5cclxuY29uc3QgYWRkQ2xhc3MgPSAoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coJ2FkZCBjbGFzcycpO1xyXG4gIGNvbnNvbGUubG9nKHNlbGVjdGVkRWxlbWVudCk7XHJcbiAgXHJcbiAgaWYoc2VsZWN0ZWRFbGVtZW50ID09PSAnJykge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlucHV0VmFsdWUpO1xyXG4gICAgXHJcbiAgICBpZiAoc2VsZWN0ZWQgIT09IHVuZGVmaW5lZCAmJiBzZWxlY3RlZCAhPT0gbnVsbCkge1xyXG4gICAgICBzZWxlY3RlZEVsZW1lbnQgPSBzZWxlY3RlZDtcclxuICAgICAgc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkLWVsZW1lbnQtc2VhcmNoJyk7XHJcbiAgICAgIGZpbmRSZWxhdGl2ZShzZWxlY3RlZEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coc2VsZWN0ZWRFbGVtZW50KTsgXHJcbiAgICBcclxuICB9IFxyXG4gIGVsc2UgaWYoc2VsZWN0ZWRFbGVtZW50ICE9PSBudWxsIHx8IHNlbGVjdGVkRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICBzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQtZWxlbWVudC1zZWFyY2gnKTtcclxuICAgIGNvbnN0IHNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbnB1dFZhbHVlKTtcclxuICAgIFxyXG4gICAgaWYgKHNlbGVjdGVkICE9PSB1bmRlZmluZWQgJiYgc2VsZWN0ZWQgIT09IG51bGwpIHtcclxuICAgICAgc2VsZWN0ZWRFbGVtZW50ID0gc2VsZWN0ZWQ7XHJcbiAgICAgIHNlbGVjdGVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZC1lbGVtZW50LXNlYXJjaCcpO1xyXG4gICAgICBmaW5kUmVsYXRpdmUoc2VsZWN0ZWRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtYnRuJykuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIHNjcm9sbFRvRWxlbWVudCgnLnNlbGVjdGVkLWVsZW1lbnQtc2VhcmNoJyk7IFxyXG59XHJcbmNvbnN0IHJlbW92ZUNsYXNzID0gKCkgPT4ge1xyXG4gIGlmKHNlbGVjdGVkRWxlbWVudCAhPT0gbnVsbCB8fCBzZWxlY3RlZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkLWVsZW1lbnQtc2VhcmNoJyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzY3JvbGxUb0VsZW1lbnQodGhlRWxlbWVudCkge1xyXG4gICAgaWYgKHR5cGVvZiB0aGVFbGVtZW50ID09PSBcInN0cmluZ1wiKSB0aGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGVFbGVtZW50KTtcclxuICAgIHZhciBzZWxlY3RlZFBvc1ggPSAwO1xyXG4gICAgdmFyIHNlbGVjdGVkUG9zWSA9IDA7XHJcbiAgICB3aGlsZSAodGhlRWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgc2VsZWN0ZWRQb3NYICs9IHRoZUVsZW1lbnQub2Zmc2V0TGVmdDtcclxuICAgICAgICBzZWxlY3RlZFBvc1kgKz0gdGhlRWxlbWVudC5vZmZzZXRUb3A7XHJcbiAgICAgICAgdGhlRWxlbWVudCA9IHRoZUVsZW1lbnQub2Zmc2V0UGFyZW50O1xyXG4gICAgfVxyXG4gICAgc2VsZWN0ZWRQb3NZID0gc2VsZWN0ZWRQb3NZLTIwO1xyXG4gICAgd2luZG93LnNjcm9sbFRvKHNlbGVjdGVkUG9zWCwgc2VsZWN0ZWRQb3NZKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYXBwSW5pdCgpIHtcclxuICBjcmVhdGVBcHBTdHJ1Y3R1cmUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmluZFJlbGF0aXZlKGVsZW1lbnQpIHtcclxuICBjb25zdCB0YWdOYW1lUGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlLnRhZ05hbWU7XHJcbiAgY29uc29sZS5sb2coYHRhZzogJHt0YWdOYW1lUGFyZW50fWApO1xyXG5cclxuICBpZihlbGVtZW50LnBhcmVudE5vZGUgIT09IHVuZGVmaW5lZCBcclxuICAgICYmIHRhZ05hbWVQYXJlbnQgIT09ICdCT0RZJ1xyXG4gICAgJiYgdGFnTmFtZVBhcmVudCAhPT0gJ0hUTUwnXHJcbiAgICAmJiB0YWdOYW1lUGFyZW50ICE9PSAnZG9jdW1lbnQnXHJcbiAgICAmJiB0YWdOYW1lUGFyZW50ICE9PSB1bmRlZmluZWRcclxuICAgICkge1xyXG4gICAgY29uc29sZS5sb2coZWxlbWVudC5wYXJlbnROb2RlKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYXJlbnQtYnRuJykuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIHBhcmVudE5vZGUgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgfSBlbHNlIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYXJlbnQtYnRuJykuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgcGFyZW50Tm9kZSA9ICcnO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWcsIHByb3BzLCAuLi5jaGlsZHJlbikge1xyXG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XHJcblxyXG4gIE9iamVjdC5rZXlzKHByb3BzKS5mb3JFYWNoKGtleSA9PiAoZWxlbWVudFtrZXldID0gcHJvcHNba2V5XSkpO1xyXG5cclxuICBjaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcclxuXHJcbiAgICBpZiAodHlwZW9mIGNoaWxkID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIGNoaWxkID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY2hpbGQpO1xyXG4gICAgfVxyXG5cclxuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gZWxlbWVudDtcclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgYXBwSW5pdCk7XHJcbiJdfQ==
